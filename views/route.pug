extends layout.pug

append head
  script(src="/javascripts/routeEdit.js" type="module" defer)
  script(src="/javascripts/climbList.js" type="module" defer)
  script(src="/javascripts/reviews.js" type="module" defer)

block content
  div(id=`route-post-${route.id}` class='')
    div#grid-route
      div#h1-hr
        h1(class='h1-route' id=`route-${route.id}-name`)= route.name
        hr.route-hr
      h2#h2-route Created by: #{postUser.username}
      div#all-attr
        div#difficulty-route
          h3.h3-route Difficulty:
          p(id=`route-${route.id}-difficulty`)= route.difficulty
        div#height-route
          h3.h3-route Height:
          p(id=`route-${route.id}-height`) #{route.height} ft.
        div#type-route
          h3.h3-route Type of Climb:
          p(id=`route-${route.id}-type`)= route.type
        div#protection-route
          h3.h3-route Protection:
          p(id=`route-${route.id}-protection`)= route.protection
        div#description-route
          h3.h3-route Description:
          p(id=`route-${route.id}-description`)= route.description
        div#crag-route
          h3.h3-route Crag:
          p(id=`route-${route.id}-crag`)= cragName
      div(id='climb-list-div')
        if (currentClimbListRoute !== true)
          form(method='POST' action=`/routes/${route.id}` id='climb-list-form')
            if seshAuth
              input(type='hidden' name='userId' value=`${seshAuth.userId}` id='list-hidden-user')
              input(type='hidden' name='routeId' value=`${route.id}` id='list-hidden-route')
            select(name='climbStatus' class='climb-status' id='climb-status-dropdown')
              option(value=`false`) Want to climb
              option(value=`true`) Have climbed
            input(type='submit' value ='Add to List' class='save-climb-status' id='climb-list-add-button')
        else
          if seshAuth
            p(id='climb-list-form-info') This route is in your climb list! #[a(href=`/users/${seshAuth.userId}/climb-list`) Click here] to change its status.
      include reviews.pug
  if seshAuth
    if route.userId === seshAuth.userId
      div(id='route-error-container')
      form(class='hidden' id=`route-edit-form-${route.id}`)
        label Name:
        input(type='text' name='name' value=route.name id=`route-${route.id}-edit-name`)
        label Difficulty:
        input(type='text' name='difficulty' value=route.difficulty id=`route-${route.id}-edit-difficulty`)
        label Height:
        input(type='number' name='height' value=route.height id=`route-${route.id}-edit-height`)
        label Type of Climb:
        input(type='text' name='type' value=route.type id=`route-${route.id}-edit-type`)
        label Protection:
        input(type='text' name='protection' value=route.protection id=`route-${route.id}-edit-protection`)
        label Description:
        textarea(rows='5' cols='30' name="description" value=route.description id=`route-${route.id}-edit-description`)= route.description
        select(name='cragId' id=`route-${route.id}-edit-crag`)
          each crag in crags
            option(value=`${crag.id}-${cragName}`) #{crag.name}
        button(class="edit-submit" id=`route-edit-submit-${route.id}`) Submit
      //- div#button-edit
      button(id='route-edit-button') Edit Route
